!function(){"use strict";const e={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},t=(e,t,r)=>{const n=e.querySelector(`#${t.id}-error`);n.textContent="",n.classList.remove(r.errorClass),t.classList.remove(r.inputErrorClass)},r=(e,t,r)=>{(e=>e.some(e=>!e.validity.valid))(e)?n(t,r):(t.disabled=!1,t.classList.remove(r.inactiveButtonClass))},n=(e,t)=>{e.disabled=!0,e.classList.add(t.inactiveButtonClass)},o=(e,r,n)=>{r.forEach(r=>{t(e,r,n)})};const a=document.querySelector(".profile__avatar-btn"),s=document.querySelector(".profile__avatar"),l=document.querySelector(".profile__name"),i=document.querySelector(".profile__description"),c=document.querySelector(".profile__edit-btn"),d=document.querySelector(".profile__new-btn"),u=document.querySelectorAll(".modal"),_=document.querySelector("#edit-avatar-modal"),m=_.querySelector(".modal__close-btn"),h=_.querySelector(".modal__form"),v=_.querySelector("#profile-avatar-input"),f=_.querySelector(".modal__button"),S=document.querySelector("#edit-profile-modal"),y=S.querySelector(".modal__close-btn"),p=S.querySelector(".modal__form"),b=S.querySelector("#profile-name-input"),q=S.querySelector("#profile-description-input"),E=S.querySelector(".modal__button"),L=document.querySelector("#new-post-modal"),g=L.querySelector(".modal__close-btn"),k=L.querySelector(".modal__form"),C=L.querySelector("#image-link-input"),P=L.querySelector("#caption-input"),U=L.querySelector(".modal__button"),$=document.querySelector("#preview-modal"),x=$.querySelector(".modal__close-btn"),A=$.querySelector(".modal__image"),D=$.querySelector(".modal__caption"),I=document.querySelector("#delete-post-modal"),w=I.querySelector(".modal__close-btn"),R=I.querySelector("#delete-post-form"),T=I.querySelector(".modal__button_type_delete"),N=I.querySelector(".modal__button_type_cancel"),B=document.querySelector("#card-template").content.querySelector(".card"),O=document.querySelector(".cards__list");let j,J;const H=new class{constructor({baseUrl:e,headers:t}){this._baseUrl=e,this._headers=t}_handleServerResponse(e){return e.ok?e.json():Promise.reject(`Error: ${e.status}`)}getAppInfo(){return Promise.all([this.getInitialPosts(),this.getUserInfo()])}getUserInfo(){return fetch(`${this._baseUrl}/users/me`,{headers:this._headers}).then(e=>this._handleServerResponse(e))}getInitialPosts(){return fetch(`${this._baseUrl}/cards`,{headers:this._headers}).then(e=>this._handleServerResponse(e))}editAvatarImage({avatar:e}){return fetch(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).then(e=>this._handleServerResponse(e))}editUserInfo({name:e,about:t}){return fetch(`${this._baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e,about:t})}).then(e=>this._handleServerResponse(e))}addNewPost({link:e,name:t}){return fetch(`${this._baseUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({link:e,name:t})}).then(e=>this._handleServerResponse(e))}deletePost(e){return fetch(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers}).then(e=>this._handleServerResponse(e))}togglePostLike(e,t){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:t?"DELETE":"PUT",headers:this._headers}).then(e=>this._handleServerResponse(e))}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"c2f31a89-a6b4-4dfc-9981-f2de219cf61f","Content-Type":"application/json"}});function z(e){e.classList.add("modal_is-opened"),document.addEventListener("keydown",Q)}function M(e){e.classList.remove("modal_is-opened"),document.removeEventListener("keydown",Q)}function F(e,t){e.classList.toggle("card__like-btn_active",t)}function G(e,t,r,n){e.textContent=t?n:r}function K(e){const t=B.cloneNode(!0),r=t.querySelector(".card__image"),n=t.querySelector(".card__title"),o=t.querySelector(".card__delete-btn"),a=t.querySelector(".card__like-btn");return r.src=e.link,r.alt=e.name,n.textContent=e.name,r.addEventListener("click",()=>{A.src=e.link,A.alt=e.name,D.textContent=e.name,z($)}),o.addEventListener("click",()=>function(e,t){j=e,J=t._id,z(I)}(t,e)),F(a,e.isLiked),a.addEventListener("click",()=>function(e,t){const r=t.classList.contains("card__like-btn_active");H.togglePostLike(e._id,r).then(e=>{F(t,e.isLiked)}).catch(console.error)}(e,a)),t}function Q(e){if("Escape"===e.key){const e=document.querySelector(".modal_is-opened");e&&M(e)}}H.getAppInfo().then(([e,t])=>{l.textContent=t.name,i.textContent=t.about,s.src=t.avatar,s.alt=t.name,e.forEach(e=>{O.append(K(e))})}).catch(console.error),a.addEventListener("click",function(){o(h,[v],e),z(_)}),m.addEventListener("click",function(){M(_)}),h.addEventListener("submit",function(t){t.preventDefault(),G(f,!0,"Save","Saving..."),H.editAvatarImage({avatar:v.value}).then(t=>{s.src=t.avatar,h.reset(),M(_),n(f,e)}).catch(console.error).finally(()=>{G(f,!1,"Save","Saving...")})}),x.addEventListener("click",function(){M($)}),c.addEventListener("click",function(){b.value=l.textContent,q.value=i.textContent,o(p,[b,q],e),z(S)}),y.addEventListener("click",function(){M(S)}),p.addEventListener("submit",function(e){e.preventDefault(),G(E,!0,"Save","Saving..."),H.editUserInfo({name:b.value,about:q.value}).then(e=>{l.textContent=e.name,i.textContent=e.about,M(S)}).catch(console.error).finally(()=>{G(E,!1,"Save","Saving...")})}),d.addEventListener("click",function(){z(L)}),g.addEventListener("click",function(){M(L)}),k.addEventListener("submit",function(t){t.preventDefault(),G(U,!0,"Post","Posting..."),H.addNewPost({name:P.value,link:C.value}).then(t=>{O.prepend(K(t)),k.reset(),M(L),n(U,e)}).catch(console.error).finally(()=>{G(U,!1,"Post","Posting...")})}),N.addEventListener("click",()=>M(I)),w.addEventListener("click",()=>M(I)),R.addEventListener("submit",function(e){e.preventDefault(),G(T,!0,"Delete","Deleting..."),H.deletePost(J).then(()=>{j.remove(),M(I),j=null,J=null}).catch(console.error).finally(()=>{G(T,!1,"Delete","Deleting...")})}),u.forEach(e=>{e.addEventListener("mousedown",t=>{t.target===e&&M(e)})}),(e=>{document.querySelectorAll(e.formSelector).forEach(n=>{((e,n)=>{const o=Array.from(e.querySelectorAll(n.inputSelector)),a=e.querySelector(n.submitButtonSelector);r(o,a,n),o.forEach(s=>{s.addEventListener("input",function(){((e,r,n)=>{r.validity.valid?t(e,r,n):((e,t,r,n)=>{const o=e.querySelector(`#${t.id}-error`);o.textContent=r,o.classList.add(n.errorClass),t.classList.add(n.inputErrorClass)})(e,r,r.validationMessage,n)})(e,s,n),r(o,a,n)})})})(n,e)})})(e)}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SUFDakJBLEVBQWFtRyxpQkFBaUIsUUFBUyxXQS9DaEJnRCxFQUFDcEosRUFBYUMsRUFBY1QsS0FDaERTLEVBQWFXLFNBQVNDLE1BUXpCZCxFQUFlQyxFQUFhQyxFQUFjVCxHQXZCdkI2SixFQUFDckosRUFBYUMsRUFBY3FKLEVBQWM5SixLQUMvRCxNQUFNVSxFQUFlRixFQUFZRyxjQUFjLElBQUlGLEVBQWFHLFlBQ2hFRixFQUFhRyxZQUFjaUosRUFDM0JwSixFQUFhSSxVQUFVVyxJQUFJekIsRUFBT00sWUFDbENHLEVBQWFLLFVBQVVXLElBQUl6QixFQUFPSyxrQkFZaEN3SixDQUNFckosRUFDQUMsRUFDQUEsRUFBYXNKLGtCQUNiL0osSUEwQ0E0SixDQUFtQnBKLEVBQWFDLEVBQWNULEdBQzlDZ0IsRUFBa0JDLEVBQVdDLEVBQWVsQixFQUM5QyxNQU9BeUosQ0FBa0I5SCxFQUFRM0IsTUMrTTlCZ0ssQ0FBaUJoSyxFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9zcG90cy8uL3NyYy9zY3JpcHRzL3ZhbGlkYXRpb24uanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9zcG90cy8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X3Nwb3RzLy4vc3JjL3V0aWxzL0FwaS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgY29uZmlnID0ge1xuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbnB1dFwiLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX2J1dHRvblwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19idXR0b25fZGlzYWJsZWRcIixcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dF90eXBlX2Vycm9yXCIsXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yX3Zpc2libGVcIixcbn07XG5cbmNvbnN0IHNob3dJbnB1dEVycm9yID0gKGZvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQsIGVycm9yTWVzc2FnZSwgY29uZmlnKSA9PiB7XG4gIGNvbnN0IGVycm9yRWxlbWVudCA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcbiAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xuICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZChjb25maWcuZXJyb3JDbGFzcyk7XG4gIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKGNvbmZpZy5pbnB1dEVycm9yQ2xhc3MpO1xufTtcblxuY29uc3QgaGlkZUlucHV0RXJyb3IgPSAoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgY29uZmlnKSA9PiB7XG4gIGNvbnN0IGVycm9yRWxlbWVudCA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcbiAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcbiAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoY29uZmlnLmVycm9yQ2xhc3MpO1xuICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShjb25maWcuaW5wdXRFcnJvckNsYXNzKTtcbn07XG5cbmNvbnN0IGNoZWNrSW5wdXRWYWxpZGl0eSA9IChmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCBjb25maWcpID0+IHtcbiAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcbiAgICBzaG93SW5wdXRFcnJvcihcbiAgICAgIGZvcm1FbGVtZW50LFxuICAgICAgaW5wdXRFbGVtZW50LFxuICAgICAgaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlLFxuICAgICAgY29uZmlnXG4gICAgKTtcbiAgfSBlbHNlIHtcbiAgICBoaWRlSW5wdXRFcnJvcihmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCBjb25maWcpO1xuICB9XG59O1xuXG5jb25zdCBoYXNJbnZhbGlkSW5wdXQgPSAoaW5wdXRMaXN0KSA9PiB7XG4gIHJldHVybiBpbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgcmV0dXJuICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7XG4gIH0pO1xufTtcblxuY29uc3QgdG9nZ2xlQnV0dG9uU3RhdGUgPSAoaW5wdXRMaXN0LCBidXR0b25FbGVtZW50LCBjb25maWcpID0+IHtcbiAgaWYgKGhhc0ludmFsaWRJbnB1dChpbnB1dExpc3QpKSB7XG4gICAgZGlzYWJsZUJ1dHRvbihidXR0b25FbGVtZW50LCBjb25maWcpO1xuICB9IGVsc2Uge1xuICAgIGJ1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICBidXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICB9XG59O1xuZXhwb3J0IGNvbnN0IGRpc2FibGVCdXR0b24gPSAoYnV0dG9uRWxlbWVudCwgY29uZmlnKSA9PiB7XG4gIGJ1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xuICBidXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQoY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xufTtcblxuZXhwb3J0IGNvbnN0IHJlc2V0VmFsaWRhdGlvbiA9IChmb3JtRWwsIGlucHV0TGlzdCwgY29uZmlnKSA9PiB7XG4gIGlucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgIGhpZGVJbnB1dEVycm9yKGZvcm1FbCwgaW5wdXQsIGNvbmZpZyk7XG4gIH0pO1xufTtcblxuY29uc3Qgc2V0RXZlbnRMaXN0ZW5lcnMgPSAoZm9ybUVsZW1lbnQsIGNvbmZpZykgPT4ge1xuICBjb25zdCBpbnB1dExpc3QgPSBBcnJheS5mcm9tKFxuICAgIGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoY29uZmlnLmlucHV0U2VsZWN0b3IpXG4gICk7XG4gIGNvbnN0IGJ1dHRvbkVsZW1lbnQgPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGNvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3Rvcik7XG5cbiAgdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCBidXR0b25FbGVtZW50LCBjb25maWcpO1xuXG4gIGlucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGNoZWNrSW5wdXRWYWxpZGl0eShmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCBjb25maWcpO1xuICAgICAgdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCBidXR0b25FbGVtZW50LCBjb25maWcpO1xuICAgIH0pO1xuICB9KTtcbn07XG5cbmV4cG9ydCBjb25zdCBlbmFibGVWYWxpZGF0aW9uID0gKGNvbmZpZykgPT4ge1xuICBjb25zdCBmb3JtTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoY29uZmlnLmZvcm1TZWxlY3Rvcik7XG4gIGZvcm1MaXN0LmZvckVhY2goKGZvcm1FbCkgPT4ge1xuICAgIHNldEV2ZW50TGlzdGVuZXJzKGZvcm1FbCwgY29uZmlnKTtcbiAgfSk7XG59O1xuIiwiaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcbmltcG9ydCB7XG4gIGVuYWJsZVZhbGlkYXRpb24sXG4gIGNvbmZpZyxcbiAgcmVzZXRWYWxpZGF0aW9uLFxuICBkaXNhYmxlQnV0dG9uLFxufSBmcm9tIFwiLi4vc2NyaXB0cy92YWxpZGF0aW9uLmpzXCI7XG5pbXBvcnQgQXBpIGZyb20gXCIuLi91dGlscy9BcGkuanNcIjtcblxuLy8gRE9NIEVMRU1FTlQgUkVGRVJFTkNFU1xuXG4vLyBQYWdlIGVsZW1lbnRzXG5jb25zdCBlZGl0QXZhdGFyQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hdmF0YXItYnRuXCIpO1xuY29uc3QgcHJvZmlsZUF2YXRhckVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hdmF0YXJcIik7XG5jb25zdCBwcm9maWxlTmFtZUVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19uYW1lXCIpO1xuY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIpO1xuY29uc3QgZWRpdFByb2ZpbGVCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXQtYnRuXCIpO1xuY29uc3QgbmV3UG9zdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fbmV3LWJ0blwiKTtcbmNvbnN0IG1vZGFscyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxcIik7XG5cbi8vIEVkaXQgYXZhdGFyIG1vZGFsIGVsZW1lbnRzXG5jb25zdCBlZGl0QXZhdGFyTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2VkaXQtYXZhdGFyLW1vZGFsXCIpO1xuY29uc3QgZWRpdEF2YXRhckNsb3NlQnRuID0gZWRpdEF2YXRhck1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlLWJ0blwiKTtcbmNvbnN0IGVkaXRBdmF0YXJGb3JtRWwgPSBlZGl0QXZhdGFyTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcbmNvbnN0IGVkaXRBdmF0YXJJbnB1dCA9IGVkaXRBdmF0YXJNb2RhbC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtYXZhdGFyLWlucHV0XCIpO1xuY29uc3QgZWRpdEF2YXRhclN1Ym1pdEJ0biA9IGVkaXRBdmF0YXJNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19idXR0b25cIik7XG5cbi8vIEVkaXQgcHJvZmlsZSBtb2RhbCBlbGVtZW50c1xuY29uc3QgZWRpdFByb2ZpbGVNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZWRpdC1wcm9maWxlLW1vZGFsXCIpO1xuY29uc3QgZWRpdFByb2ZpbGVDbG9zZUJ0biA9IGVkaXRQcm9maWxlTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2UtYnRuXCIpO1xuY29uc3QgZWRpdFByb2ZpbGVGb3JtRWwgPSBlZGl0UHJvZmlsZU1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XG5jb25zdCBlZGl0UHJvZmlsZU5hbWVJbnB1dCA9IGVkaXRQcm9maWxlTW9kYWwucXVlcnlTZWxlY3RvcihcbiAgXCIjcHJvZmlsZS1uYW1lLWlucHV0XCJcbik7XG5jb25zdCBlZGl0UHJvZmlsZURlc2NyaXB0aW9uSW5wdXQgPSBlZGl0UHJvZmlsZU1vZGFsLnF1ZXJ5U2VsZWN0b3IoXG4gIFwiI3Byb2ZpbGUtZGVzY3JpcHRpb24taW5wdXRcIlxuKTtcbmNvbnN0IGVkaXRQcm9maWxlU3VibWl0QnRuID0gZWRpdFByb2ZpbGVNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19idXR0b25cIik7XG5cbi8vIE5ldyBwb3N0IG1vZGFsIGVsZW1lbnRzXG5jb25zdCBuZXdQb3N0TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI25ldy1wb3N0LW1vZGFsXCIpO1xuY29uc3QgbmV3UG9zdENsb3NlQnRuID0gbmV3UG9zdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlLWJ0blwiKTtcbmNvbnN0IG5ld1Bvc3RGb3JtRWwgPSBuZXdQb3N0TW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcbmNvbnN0IG5ld1Bvc3RMaW5rSW5wdXQgPSBuZXdQb3N0TW9kYWwucXVlcnlTZWxlY3RvcihcIiNpbWFnZS1saW5rLWlucHV0XCIpO1xuY29uc3QgbmV3UG9zdENhcHRpb25JbnB1dCA9IG5ld1Bvc3RNb2RhbC5xdWVyeVNlbGVjdG9yKFwiI2NhcHRpb24taW5wdXRcIik7XG5jb25zdCBuZXdQb3N0U3VibWl0QnRuID0gbmV3UG9zdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2J1dHRvblwiKTtcblxuLy8gUHJldmlldyBwb3N0IG1vZGFsIGVsZW1lbnRzXG5jb25zdCBwcmV2aWV3TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3ByZXZpZXctbW9kYWxcIik7XG5jb25zdCBwcmV2aWV3TW9kYWxDbG9zZUJ0biA9IHByZXZpZXdNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jbG9zZS1idG5cIik7XG5jb25zdCBwcmV2aWV3SW1hZ2VFbCA9IHByZXZpZXdNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbWFnZVwiKTtcbmNvbnN0IHByZXZpZXdDYXB0aW9uRWwgPSBwcmV2aWV3TW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2FwdGlvblwiKTtcblxuLy8gRGVsZXRlIHBvc3QgbW9kYWwgZWxlbWVudHNcbmNvbnN0IGRlbGV0ZVBvc3RNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZGVsZXRlLXBvc3QtbW9kYWxcIik7XG5jb25zdCBkZWxldGVQb3N0Q2xvc2VCdG4gPSBkZWxldGVQb3N0TW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2UtYnRuXCIpO1xuY29uc3QgZGVsZXRlUG9zdEZvcm1FbCA9IGRlbGV0ZVBvc3RNb2RhbC5xdWVyeVNlbGVjdG9yKFwiI2RlbGV0ZS1wb3N0LWZvcm1cIik7XG5jb25zdCBkZWxldGVQb3N0U3VibWl0QnRuID0gZGVsZXRlUG9zdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2J1dHRvbl90eXBlX2RlbGV0ZVwiKTtcbmNvbnN0IGRlbGV0ZVBvc3RDYW5jZWxCdG4gPSBkZWxldGVQb3N0TW9kYWwucXVlcnlTZWxlY3RvcihcbiAgXCIubW9kYWxfX2J1dHRvbl90eXBlX2NhbmNlbFwiXG4pO1xuXG4vLyBDYXJkIGVsZW1lbnRzXG5jb25zdCBjYXJkVGVtcGxhdGUgPSBkb2N1bWVudFxuICAucXVlcnlTZWxlY3RvcihcIiNjYXJkLXRlbXBsYXRlXCIpXG4gIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKTtcbmNvbnN0IGNhcmRzTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX2xpc3RcIik7XG5sZXQgc2VsZWN0ZWRDYXJkLCBzZWxlY3RlZENhcmRJZDtcblxuLy8gQVBJIElOU1RBTkNFXG5cbmNvbnN0IGFwaSA9IG5ldyBBcGkoe1xuICBiYXNlVXJsOiBcImh0dHBzOi8vYXJvdW5kLWFwaS5lbi50cmlwbGV0ZW4tc2VydmljZXMuY29tL3YxXCIsXG4gIGhlYWRlcnM6IHtcbiAgICBhdXRob3JpemF0aW9uOiBcImMyZjMxYTg5LWE2YjQtNGRmYy05OTgxLWYyZGUyMTljZjYxZlwiLCAvLyBSZXBsYWNlIHdpdGggeW91ciBhY3R1YWwgdG9rZW5cbiAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgfSxcbn0pO1xuXG4vLyBJTklUSUFMIERBVEEgTE9BRFxuXG5hcGlcbiAgLmdldEFwcEluZm8oKVxuICAudGhlbigoW2NhcmRzLCB1c2VyXSkgPT4ge1xuICAgIHByb2ZpbGVOYW1lRWwudGV4dENvbnRlbnQgPSB1c2VyLm5hbWU7XG4gICAgcHJvZmlsZURlc2NyaXB0aW9uRWwudGV4dENvbnRlbnQgPSB1c2VyLmFib3V0O1xuICAgIHByb2ZpbGVBdmF0YXJFbC5zcmMgPSB1c2VyLmF2YXRhcjtcbiAgICBwcm9maWxlQXZhdGFyRWwuYWx0ID0gdXNlci5uYW1lO1xuXG4gICAgY2FyZHMuZm9yRWFjaCgoY2FyZCkgPT4ge1xuICAgICAgY2FyZHNMaXN0LmFwcGVuZChnZXRDYXJkRWxlbWVudChjYXJkKSk7XG4gICAgfSk7XG4gIH0pXG4gIC5jYXRjaChjb25zb2xlLmVycm9yKTtcblxuLy8gRlVOQ1RJT05TICYgSEFORExFUlNcblxuLy8gQmFzZSBmdW5jdGlvbnNcbmZ1bmN0aW9uIG9wZW5Nb2RhbChtb2RhbCkge1xuICBtb2RhbC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfaXMtb3BlbmVkXCIpO1xuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBjbG9zZU9uRXNjYXBlKTtcbn1cbmZ1bmN0aW9uIGNsb3NlTW9kYWwobW9kYWwpIHtcbiAgbW9kYWwuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX2lzLW9wZW5lZFwiKTtcbiAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgY2xvc2VPbkVzY2FwZSk7XG59XG5mdW5jdGlvbiBzZXRMaWtlcyhsaWtlQnRuRWwsIGlzTGlrZWQpIHtcbiAgbGlrZUJ0bkVsLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19saWtlLWJ0bl9hY3RpdmVcIiwgaXNMaWtlZCk7XG59XG5mdW5jdGlvbiBzZXRNb2RhbEJ0blRleHQoYnV0dG9uLCBpc0xvYWRpbmcsIGRlZmF1bHRUZXh0LCBsb2FkaW5nVGV4dCkge1xuICBidXR0b24udGV4dENvbnRlbnQgPSBpc0xvYWRpbmcgPyBsb2FkaW5nVGV4dCA6IGRlZmF1bHRUZXh0O1xufVxuZnVuY3Rpb24gZ2V0Q2FyZEVsZW1lbnQoZGF0YSkge1xuICBjb25zdCBjYXJkRWxlbWVudCA9IGNhcmRUZW1wbGF0ZS5jbG9uZU5vZGUodHJ1ZSk7XG4gIGNvbnN0IGNhcmRJbWFnZUVsID0gY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcbiAgY29uc3QgY2FyZFRpdGxlRWwgPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpO1xuICBjb25zdCBjYXJkRGVsZXRlQnRuRWwgPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2RlbGV0ZS1idG5cIik7XG4gIGNvbnN0IGNhcmRMaWtlQnRuRWwgPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnRuXCIpO1xuICBjYXJkSW1hZ2VFbC5zcmMgPSBkYXRhLmxpbms7XG4gIGNhcmRJbWFnZUVsLmFsdCA9IGRhdGEubmFtZTtcbiAgY2FyZFRpdGxlRWwudGV4dENvbnRlbnQgPSBkYXRhLm5hbWU7XG4gIGNhcmRJbWFnZUVsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgcHJldmlld0ltYWdlRWwuc3JjID0gZGF0YS5saW5rO1xuICAgIHByZXZpZXdJbWFnZUVsLmFsdCA9IGRhdGEubmFtZTtcbiAgICBwcmV2aWV3Q2FwdGlvbkVsLnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xuICAgIG9wZW5Nb2RhbChwcmV2aWV3TW9kYWwpO1xuICB9KTtcbiAgY2FyZERlbGV0ZUJ0bkVsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PlxuICAgIGhhbmRsZURlbGV0ZUNhcmQoY2FyZEVsZW1lbnQsIGRhdGEpXG4gICk7XG4gIHNldExpa2VzKGNhcmRMaWtlQnRuRWwsIGRhdGEuaXNMaWtlZCk7XG4gIGNhcmRMaWtlQnRuRWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+XG4gICAgaGFuZGxlUG9zdExpa2UoZGF0YSwgY2FyZExpa2VCdG5FbClcbiAgKTtcbiAgcmV0dXJuIGNhcmRFbGVtZW50O1xufVxuXG4vLyBTdWJtaXNzaW9uIGhhbmRsZXJzXG5mdW5jdGlvbiBoYW5kbGVBdmF0YXJGb3JtU3VibWl0KGV2dCkge1xuICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgc2V0TW9kYWxCdG5UZXh0KGVkaXRBdmF0YXJTdWJtaXRCdG4sIHRydWUsIFwiU2F2ZVwiLCBcIlNhdmluZy4uLlwiKTtcbiAgYXBpXG4gICAgLmVkaXRBdmF0YXJJbWFnZSh7IGF2YXRhcjogZWRpdEF2YXRhcklucHV0LnZhbHVlIH0pXG4gICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgIHByb2ZpbGVBdmF0YXJFbC5zcmMgPSBkYXRhLmF2YXRhcjtcbiAgICAgIGVkaXRBdmF0YXJGb3JtRWwucmVzZXQoKTtcbiAgICAgIGNsb3NlTW9kYWwoZWRpdEF2YXRhck1vZGFsKTtcbiAgICAgIGRpc2FibGVCdXR0b24oZWRpdEF2YXRhclN1Ym1pdEJ0biwgY29uZmlnKTtcbiAgICB9KVxuICAgIC5jYXRjaChjb25zb2xlLmVycm9yKVxuICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgIHNldE1vZGFsQnRuVGV4dChlZGl0QXZhdGFyU3VibWl0QnRuLCBmYWxzZSwgXCJTYXZlXCIsIFwiU2F2aW5nLi4uXCIpO1xuICAgIH0pO1xufVxuZnVuY3Rpb24gaGFuZGxlUHJvZmlsZUZvcm1TdWJtaXQoZXZ0KSB7XG4gIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICBzZXRNb2RhbEJ0blRleHQoZWRpdFByb2ZpbGVTdWJtaXRCdG4sIHRydWUsIFwiU2F2ZVwiLCBcIlNhdmluZy4uLlwiKTtcbiAgYXBpXG4gICAgLmVkaXRVc2VySW5mbyh7XG4gICAgICBuYW1lOiBlZGl0UHJvZmlsZU5hbWVJbnB1dC52YWx1ZSxcbiAgICAgIGFib3V0OiBlZGl0UHJvZmlsZURlc2NyaXB0aW9uSW5wdXQudmFsdWUsXG4gICAgfSlcbiAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgcHJvZmlsZU5hbWVFbC50ZXh0Q29udGVudCA9IGRhdGEubmFtZTtcbiAgICAgIHByb2ZpbGVEZXNjcmlwdGlvbkVsLnRleHRDb250ZW50ID0gZGF0YS5hYm91dDtcbiAgICAgIGNsb3NlTW9kYWwoZWRpdFByb2ZpbGVNb2RhbCk7XG4gICAgfSlcbiAgICAuY2F0Y2goY29uc29sZS5lcnJvcilcbiAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICBzZXRNb2RhbEJ0blRleHQoZWRpdFByb2ZpbGVTdWJtaXRCdG4sIGZhbHNlLCBcIlNhdmVcIiwgXCJTYXZpbmcuLi5cIik7XG4gICAgfSk7XG59XG5mdW5jdGlvbiBoYW5kbGVQb3N0Rm9ybVN1Ym1pdChldnQpIHtcbiAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gIHNldE1vZGFsQnRuVGV4dChuZXdQb3N0U3VibWl0QnRuLCB0cnVlLCBcIlBvc3RcIiwgXCJQb3N0aW5nLi4uXCIpO1xuICBhcGlcbiAgICAuYWRkTmV3UG9zdCh7XG4gICAgICBuYW1lOiBuZXdQb3N0Q2FwdGlvbklucHV0LnZhbHVlLFxuICAgICAgbGluazogbmV3UG9zdExpbmtJbnB1dC52YWx1ZSxcbiAgICB9KVxuICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICBjYXJkc0xpc3QucHJlcGVuZChnZXRDYXJkRWxlbWVudChkYXRhKSk7XG4gICAgICBuZXdQb3N0Rm9ybUVsLnJlc2V0KCk7XG4gICAgICBjbG9zZU1vZGFsKG5ld1Bvc3RNb2RhbCk7XG4gICAgICBkaXNhYmxlQnV0dG9uKG5ld1Bvc3RTdWJtaXRCdG4sIGNvbmZpZyk7XG4gICAgfSlcbiAgICAuY2F0Y2goY29uc29sZS5lcnJvcilcbiAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICBzZXRNb2RhbEJ0blRleHQobmV3UG9zdFN1Ym1pdEJ0biwgZmFsc2UsIFwiUG9zdFwiLCBcIlBvc3RpbmcuLi5cIik7XG4gICAgfSk7XG59XG5mdW5jdGlvbiBoYW5kbGVEZWxldGVDYXJkKGNhcmRFbGVtZW50LCBkYXRhKSB7XG4gIHNlbGVjdGVkQ2FyZCA9IGNhcmRFbGVtZW50O1xuICBzZWxlY3RlZENhcmRJZCA9IGRhdGEuX2lkO1xuICBvcGVuTW9kYWwoZGVsZXRlUG9zdE1vZGFsKTtcbn1cbmZ1bmN0aW9uIGhhbmRsZURlbGV0ZVBvc3RTdWJtaXQoZXZ0KSB7XG4gIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICBzZXRNb2RhbEJ0blRleHQoZGVsZXRlUG9zdFN1Ym1pdEJ0biwgdHJ1ZSwgXCJEZWxldGVcIiwgXCJEZWxldGluZy4uLlwiKTtcbiAgYXBpXG4gICAgLmRlbGV0ZVBvc3Qoc2VsZWN0ZWRDYXJkSWQpXG4gICAgLnRoZW4oKCkgPT4ge1xuICAgICAgc2VsZWN0ZWRDYXJkLnJlbW92ZSgpO1xuICAgICAgY2xvc2VNb2RhbChkZWxldGVQb3N0TW9kYWwpO1xuICAgICAgc2VsZWN0ZWRDYXJkID0gbnVsbDtcbiAgICAgIHNlbGVjdGVkQ2FyZElkID0gbnVsbDtcbiAgICB9KVxuICAgIC5jYXRjaChjb25zb2xlLmVycm9yKVxuICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgIHNldE1vZGFsQnRuVGV4dChkZWxldGVQb3N0U3VibWl0QnRuLCBmYWxzZSwgXCJEZWxldGVcIiwgXCJEZWxldGluZy4uLlwiKTtcbiAgICB9KTtcbn1cbmZ1bmN0aW9uIGhhbmRsZVBvc3RMaWtlKGNhcmREYXRhLCBsaWtlQnRuRWwpIHtcbiAgY29uc3QgaXNDdXJyZW50bHlMaWtlZCA9IGxpa2VCdG5FbC5jbGFzc0xpc3QuY29udGFpbnMoXG4gICAgXCJjYXJkX19saWtlLWJ0bl9hY3RpdmVcIlxuICApO1xuICBhcGlcbiAgICAudG9nZ2xlUG9zdExpa2UoY2FyZERhdGEuX2lkLCBpc0N1cnJlbnRseUxpa2VkKVxuICAgIC50aGVuKCh1cGRhdGVkUG9zdCkgPT4ge1xuICAgICAgc2V0TGlrZXMobGlrZUJ0bkVsLCB1cGRhdGVkUG9zdC5pc0xpa2VkKTtcbiAgICB9KVxuICAgIC5jYXRjaChjb25zb2xlLmVycm9yKTtcbn1cblxuLy8gRWRpdCBhdmF0YXIgbGlzdGVuZXJzXG5lZGl0QXZhdGFyQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG4gIHJlc2V0VmFsaWRhdGlvbihlZGl0QXZhdGFyRm9ybUVsLCBbZWRpdEF2YXRhcklucHV0XSwgY29uZmlnKTtcbiAgb3Blbk1vZGFsKGVkaXRBdmF0YXJNb2RhbCk7XG59KTtcbmVkaXRBdmF0YXJDbG9zZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuICBjbG9zZU1vZGFsKGVkaXRBdmF0YXJNb2RhbCk7XG59KTtcbmVkaXRBdmF0YXJGb3JtRWwuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBoYW5kbGVBdmF0YXJGb3JtU3VibWl0KTtcblxucHJldmlld01vZGFsQ2xvc2VCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgY2xvc2VNb2RhbChwcmV2aWV3TW9kYWwpO1xufSk7XG5cbi8vIEVkaXQgcHJvZmlsZSBsaXN0ZW5lcnNcbmVkaXRQcm9maWxlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG4gIGVkaXRQcm9maWxlTmFtZUlucHV0LnZhbHVlID0gcHJvZmlsZU5hbWVFbC50ZXh0Q29udGVudDtcbiAgZWRpdFByb2ZpbGVEZXNjcmlwdGlvbklucHV0LnZhbHVlID0gcHJvZmlsZURlc2NyaXB0aW9uRWwudGV4dENvbnRlbnQ7XG4gIHJlc2V0VmFsaWRhdGlvbihcbiAgICBlZGl0UHJvZmlsZUZvcm1FbCxcbiAgICBbZWRpdFByb2ZpbGVOYW1lSW5wdXQsIGVkaXRQcm9maWxlRGVzY3JpcHRpb25JbnB1dF0sXG4gICAgY29uZmlnXG4gICk7XG4gIG9wZW5Nb2RhbChlZGl0UHJvZmlsZU1vZGFsKTtcbn0pO1xuZWRpdFByb2ZpbGVDbG9zZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuICBjbG9zZU1vZGFsKGVkaXRQcm9maWxlTW9kYWwpO1xufSk7XG5lZGl0UHJvZmlsZUZvcm1FbC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0KTtcblxuLy8gTmV3IHBvc3QgbGlzdGVuZXJzXG5uZXdQb3N0QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG4gIG9wZW5Nb2RhbChuZXdQb3N0TW9kYWwpO1xufSk7XG5uZXdQb3N0Q2xvc2VCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgY2xvc2VNb2RhbChuZXdQb3N0TW9kYWwpO1xufSk7XG5uZXdQb3N0Rm9ybUVsLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgaGFuZGxlUG9zdEZvcm1TdWJtaXQpO1xuXG4vLyBEZWxldGUgcG9zdCBsaXN0ZW5lcnNcbmRlbGV0ZVBvc3RDYW5jZWxCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+XG4gIGNsb3NlTW9kYWwoZGVsZXRlUG9zdE1vZGFsKVxuKTtcbmRlbGV0ZVBvc3RDbG9zZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gY2xvc2VNb2RhbChkZWxldGVQb3N0TW9kYWwpKTtcbmRlbGV0ZVBvc3RGb3JtRWwuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBoYW5kbGVEZWxldGVQb3N0U3VibWl0KTtcblxuLy8gQ2xvc2UgbW9kYWwgZXZlbnRzXG5tb2RhbHMuZm9yRWFjaCgobW9kYWwpID0+IHtcbiAgbW9kYWwuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCAoZXZ0KSA9PiB7XG4gICAgaWYgKGV2dC50YXJnZXQgPT09IG1vZGFsKSB7XG4gICAgICBjbG9zZU1vZGFsKG1vZGFsKTtcbiAgICB9XG4gIH0pO1xufSk7XG5mdW5jdGlvbiBjbG9zZU9uRXNjYXBlKGV2dCkge1xuICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xuICAgIGNvbnN0IG9wZW5lZE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9pcy1vcGVuZWRcIik7XG4gICAgaWYgKG9wZW5lZE1vZGFsKSBjbG9zZU1vZGFsKG9wZW5lZE1vZGFsKTtcbiAgfVxufVxuXG4vLyBJTklUXG5cbmVuYWJsZVZhbGlkYXRpb24oY29uZmlnKTtcbiIsImNsYXNzIEFwaSB7XG4gIGNvbnN0cnVjdG9yKHsgYmFzZVVybCwgaGVhZGVycyB9KSB7XG4gICAgdGhpcy5fYmFzZVVybCA9IGJhc2VVcmw7XG4gICAgdGhpcy5faGVhZGVycyA9IGhlYWRlcnM7XG4gIH1cblxuICBfaGFuZGxlU2VydmVyUmVzcG9uc2UocmVzKSB7XG4gICAgaWYgKHJlcy5vaykgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICB9XG5cbiAgZ2V0QXBwSW5mbygpIHtcbiAgICByZXR1cm4gUHJvbWlzZS5hbGwoW3RoaXMuZ2V0SW5pdGlhbFBvc3RzKCksIHRoaXMuZ2V0VXNlckluZm8oKV0pO1xuICB9XG5cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KS50aGVuKChyZXMpID0+IHRoaXMuX2hhbmRsZVNlcnZlclJlc3BvbnNlKHJlcykpO1xuICB9XG5cbiAgZ2V0SW5pdGlhbFBvc3RzKCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSkudGhlbigocmVzKSA9PiB0aGlzLl9oYW5kbGVTZXJ2ZXJSZXNwb25zZShyZXMpKTtcbiAgfVxuXG4gIGVkaXRBdmF0YXJJbWFnZSh7IGF2YXRhciB9KSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lL2F2YXRhcmAsIHtcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgYXZhdGFyLFxuICAgICAgfSksXG4gICAgfSkudGhlbigocmVzKSA9PiB0aGlzLl9oYW5kbGVTZXJ2ZXJSZXNwb25zZShyZXMpKTtcbiAgfVxuXG4gIGVkaXRVc2VySW5mbyh7IG5hbWUsIGFib3V0IH0pIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIG5hbWUsXG4gICAgICAgIGFib3V0LFxuICAgICAgfSksXG4gICAgfSkudGhlbigocmVzKSA9PiB0aGlzLl9oYW5kbGVTZXJ2ZXJSZXNwb25zZShyZXMpKTtcbiAgfVxuXG4gIGFkZE5ld1Bvc3QoeyBsaW5rLCBuYW1lIH0pIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbGluayxcbiAgICAgICAgbmFtZSxcbiAgICAgIH0pLFxuICAgIH0pLnRoZW4oKHJlcykgPT4gdGhpcy5faGFuZGxlU2VydmVyUmVzcG9uc2UocmVzKSk7XG4gIH1cblxuICBkZWxldGVQb3N0KGNhcmRJZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH1gLCB7XG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pLnRoZW4oKHJlcykgPT4gdGhpcy5faGFuZGxlU2VydmVyUmVzcG9uc2UocmVzKSk7XG4gIH1cblxuICB0b2dnbGVQb3N0TGlrZShjYXJkSWQsIGlzTGlrZWQpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9L2xpa2VzYCwge1xuICAgICAgbWV0aG9kOiBpc0xpa2VkID8gXCJERUxFVEVcIiA6IFwiUFVUXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pLnRoZW4oKHJlcykgPT4gdGhpcy5faGFuZGxlU2VydmVyUmVzcG9uc2UocmVzKSk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQXBpO1xuIl0sIm5hbWVzIjpbImNvbmZpZyIsImZvcm1TZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiaGlkZUlucHV0RXJyb3IiLCJmb3JtRWxlbWVudCIsImlucHV0RWxlbWVudCIsImVycm9yRWxlbWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJpZCIsInRleHRDb250ZW50IiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwidG9nZ2xlQnV0dG9uU3RhdGUiLCJpbnB1dExpc3QiLCJidXR0b25FbGVtZW50Iiwic29tZSIsInZhbGlkaXR5IiwidmFsaWQiLCJoYXNJbnZhbGlkSW5wdXQiLCJkaXNhYmxlQnV0dG9uIiwiZGlzYWJsZWQiLCJhZGQiLCJyZXNldFZhbGlkYXRpb24iLCJmb3JtRWwiLCJmb3JFYWNoIiwiaW5wdXQiLCJlZGl0QXZhdGFyQnRuIiwiZG9jdW1lbnQiLCJwcm9maWxlQXZhdGFyRWwiLCJwcm9maWxlTmFtZUVsIiwicHJvZmlsZURlc2NyaXB0aW9uRWwiLCJlZGl0UHJvZmlsZUJ0biIsIm5ld1Bvc3RCdG4iLCJtb2RhbHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZWRpdEF2YXRhck1vZGFsIiwiZWRpdEF2YXRhckNsb3NlQnRuIiwiZWRpdEF2YXRhckZvcm1FbCIsImVkaXRBdmF0YXJJbnB1dCIsImVkaXRBdmF0YXJTdWJtaXRCdG4iLCJlZGl0UHJvZmlsZU1vZGFsIiwiZWRpdFByb2ZpbGVDbG9zZUJ0biIsImVkaXRQcm9maWxlRm9ybUVsIiwiZWRpdFByb2ZpbGVOYW1lSW5wdXQiLCJlZGl0UHJvZmlsZURlc2NyaXB0aW9uSW5wdXQiLCJlZGl0UHJvZmlsZVN1Ym1pdEJ0biIsIm5ld1Bvc3RNb2RhbCIsIm5ld1Bvc3RDbG9zZUJ0biIsIm5ld1Bvc3RGb3JtRWwiLCJuZXdQb3N0TGlua0lucHV0IiwibmV3UG9zdENhcHRpb25JbnB1dCIsIm5ld1Bvc3RTdWJtaXRCdG4iLCJwcmV2aWV3TW9kYWwiLCJwcmV2aWV3TW9kYWxDbG9zZUJ0biIsInByZXZpZXdJbWFnZUVsIiwicHJldmlld0NhcHRpb25FbCIsImRlbGV0ZVBvc3RNb2RhbCIsImRlbGV0ZVBvc3RDbG9zZUJ0biIsImRlbGV0ZVBvc3RGb3JtRWwiLCJkZWxldGVQb3N0U3VibWl0QnRuIiwiZGVsZXRlUG9zdENhbmNlbEJ0biIsImNhcmRUZW1wbGF0ZSIsImNvbnRlbnQiLCJjYXJkc0xpc3QiLCJzZWxlY3RlZENhcmQiLCJzZWxlY3RlZENhcmRJZCIsImFwaSIsImNvbnN0cnVjdG9yIiwiYmFzZVVybCIsImhlYWRlcnMiLCJ0aGlzIiwiX2Jhc2VVcmwiLCJfaGVhZGVycyIsIl9oYW5kbGVTZXJ2ZXJSZXNwb25zZSIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJnZXRBcHBJbmZvIiwiYWxsIiwiZ2V0SW5pdGlhbFBvc3RzIiwiZ2V0VXNlckluZm8iLCJmZXRjaCIsInRoZW4iLCJlZGl0QXZhdGFySW1hZ2UiLCJhdmF0YXIiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImVkaXRVc2VySW5mbyIsIm5hbWUiLCJhYm91dCIsImFkZE5ld1Bvc3QiLCJsaW5rIiwiZGVsZXRlUG9zdCIsImNhcmRJZCIsInRvZ2dsZVBvc3RMaWtlIiwiaXNMaWtlZCIsImF1dGhvcml6YXRpb24iLCJvcGVuTW9kYWwiLCJtb2RhbCIsImFkZEV2ZW50TGlzdGVuZXIiLCJjbG9zZU9uRXNjYXBlIiwiY2xvc2VNb2RhbCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJzZXRMaWtlcyIsImxpa2VCdG5FbCIsInRvZ2dsZSIsInNldE1vZGFsQnRuVGV4dCIsImJ1dHRvbiIsImlzTG9hZGluZyIsImRlZmF1bHRUZXh0IiwibG9hZGluZ1RleHQiLCJnZXRDYXJkRWxlbWVudCIsImRhdGEiLCJjYXJkRWxlbWVudCIsImNsb25lTm9kZSIsImNhcmRJbWFnZUVsIiwiY2FyZFRpdGxlRWwiLCJjYXJkRGVsZXRlQnRuRWwiLCJjYXJkTGlrZUJ0bkVsIiwic3JjIiwiYWx0IiwiX2lkIiwiaGFuZGxlRGVsZXRlQ2FyZCIsImNhcmREYXRhIiwiaXNDdXJyZW50bHlMaWtlZCIsImNvbnRhaW5zIiwidXBkYXRlZFBvc3QiLCJjYXRjaCIsImNvbnNvbGUiLCJlcnJvciIsImhhbmRsZVBvc3RMaWtlIiwiZXZ0Iiwia2V5Iiwib3BlbmVkTW9kYWwiLCJjYXJkcyIsInVzZXIiLCJjYXJkIiwiYXBwZW5kIiwicHJldmVudERlZmF1bHQiLCJ2YWx1ZSIsInJlc2V0IiwiZmluYWxseSIsInByZXBlbmQiLCJ0YXJnZXQiLCJzZXRFdmVudExpc3RlbmVycyIsIkFycmF5IiwiZnJvbSIsImNoZWNrSW5wdXRWYWxpZGl0eSIsInNob3dJbnB1dEVycm9yIiwiZXJyb3JNZXNzYWdlIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJlbmFibGVWYWxpZGF0aW9uIl0sInNvdXJjZVJvb3QiOiIifQ==